{% extends 'index.html' %}
{% load static %}

{% block content %}
<div class="edit-game-container">
    <link rel="stylesheet" href="{% static 'css/library/edit_game_style.css' %}">
    <h2>Редактировать игру: {{ game.title }}</h2>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Форма для игры -->
        <div class="form-group">
            <label for="{{ game_form.title.id_for_label }}">Название игры:</label>
            {{ game_form.title }}
            {% if game_form.title.errors %}
            <div class="error-message">{{ game_form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ game_form.title.id_for_label }}">Рейтинг</label>
            {{ game_form.rating }}
            {% if game_form.title.errors %}
            <div class="error-message">{{ game_form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ game_form.description.id_for_label }}">Описание:</label>
            {{ game_form.description }}
            {% if game_form.description.errors %}
            <div class="error-message">{{ game_form.description.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ game_form.developer.id_for_label }}">Разработчик:</label>
            {{ game_form.developer }}
            {% if game_form.developer.errors %}
            <div class="error-message">{{ game_form.developer.errors }}</div>
            {% endif %}
        </div>

        <!-- Форма для обложки -->
        <div class="form-group">
            <label for="{{ cover_form.cover.id_for_label }}">Обложка:</label>
            {% if game.gamecover_set.first %}
                <img src="{{ game.gamecover_set.first.cover.url }}" class="cover-image" alt="Текущая обложка" />
            {% else %}
                <p>Обложка отсутствует.</p>
            {% endif %}
            <input type="file" name="{{ cover_form.cover.name }}" id="{{ cover_form.cover.id_for_label }}">
            {% if cover_form.cover.errors %}
            <div class="error-message">{{ cover_form.cover.errors }}</div>
            {% endif %}
        </div>

        <!-- Кнопки -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Сохранить изменения</button>
            <a href="{% url 'game_detail' game.id %}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}